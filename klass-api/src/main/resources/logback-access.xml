<configuration debug="false">
    <appender name="accessJsonConsoleAppender" class="ch.qos.logback.core.ConsoleAppender">
        <filter class="ch.qos.logback.core.filter.EvaluatorFilter">
            <evaluator class="ch.qos.logback.access.common.net.URLEvaluator">
                <URL>/prometheus</URL>
                <URL>/actuator</URL>
                <URL>/swagger-ui</URL>
                <URL>/api-docs</URL>
                <URL>/api-guide.html</URL>
            </evaluator>
            <OnMismatch>NEUTRAL</OnMismatch>
            <OnMatch>DENY</OnMatch>
        </filter>
        <encoder class="net.logstash.logback.encoder.LogstashAccessEncoder">
            <messagePattern>%requestURL - %statusCode - %i{User-Agent}</messagePattern>
            <fieldNames>
                <requestHeaders>request_headers</requestHeaders>
                <responseHeaders>response_headers</responseHeaders>
            </fieldNames>
            <provider class="net.logstash.logback.composite.loggingevent.LoggingEventPatternJsonProvider">
                <pattern>
                    {
                    "context": "klass-api",
                    "logger_name": "tomcat.access",
                    "level": "INFO"
                    }
                </pattern>
            </provider>
        </encoder>
    </appender>
    <appender-ref ref="accessJsonConsoleAppender"/>
</configuration>
